/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  default: () => PackratPlugin
});
var import_obsidian = __toModule(require("obsidian"));
var DEFAULT_SETTINGS = {
  deletion_trigger: "%%done_del%%",
  bottom_trigger: "%%done_end%%",
  archive_trigger: "%%done_log%%",
  archive_filepath: "archive.md"
};
var PackratPlugin = class extends import_obsidian.Plugin {
  onload() {
    return __async(this, null, function* () {
      console.log("Packrat: Loading...");
      yield this.loadSettings();
      this.addSettingTab(new PackratSettingTab(this.app, this));
      this.addCommand({
        id: "run",
        name: "Process completed recurring Tasks within the active note",
        checkCallback: (checking) => {
          const { workspace } = this.app;
          const activeFile = workspace.getActiveFile();
          if (activeFile && activeFile.extension == "md") {
            if (checking) {
              return true;
            }
            this.ProcessCompletedRecurringTasks(activeFile);
          } else {
            return false;
          }
        }
      });
    });
  }
  onunload() {
    console.log("Packrat: Unloading...");
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  ProcessCompletedRecurringTasks(activeFile) {
    return __async(this, null, function* () {
      try {
        const { vault } = this.app;
        const rruleSignifier = "\u{1F501}".normalize();
        const deleteTrigger = this.settings.deletion_trigger;
        const archiveTrigger = this.settings.archive_trigger;
        const bottomTrigger = this.settings.bottom_trigger;
        const archiveFilename = this.settings.archive_filepath;
        const archiveFile = vault.getAbstractFileByPath(archiveFilename) || (yield vault.create(archiveFilename, ""));
        let deletedTaskCount = 0;
        let movedTaskCount = 0;
        let archivedTaskCount = 0;
        let thisLine = "";
        let writebackLines = [];
        let appendLines = [];
        let archiveLines = [];
        let results = [];
        let fileContents = yield vault.read(activeFile);
        fileContents = fileContents.split("\n");
        for (let i = 0; i < fileContents.length; i++) {
          thisLine = fileContents[i];
          let firstFive = thisLine.substring(0, 5).toUpperCase();
          if (firstFive === "- [X]" && thisLine.indexOf(rruleSignifier) != -1) {
            if (0 < thisLine.indexOf(deleteTrigger)) {
              deletedTaskCount += 1;
              continue;
            }
            if (0 < thisLine.indexOf(archiveTrigger)) {
              archiveLines.push(thisLine);
              archivedTaskCount += 1;
              continue;
            }
            if (0 < thisLine.indexOf(bottomTrigger)) {
              appendLines.push(thisLine);
              movedTaskCount += 1;
              continue;
            }
            writebackLines.push(thisLine);
          } else {
            writebackLines.push(thisLine);
          }
        }
        if (archivedTaskCount > 0) {
          let archiveFileContents = yield vault.read(archiveFile);
          archiveFileContents = archiveFileContents.split("\n");
          archiveFileContents = archiveFileContents.concat(archiveLines);
          vault.modify(archiveFile, archiveFileContents.join("\n"));
        }
        results = writebackLines.concat(appendLines);
        vault.modify(activeFile, results.join("\n"));
        var tdMsg = `${deletedTaskCount} tasks deleted
`;
        var tmMsg = `${movedTaskCount} tasks moved to end of note
`;
        var taMsg = `${archivedTaskCount} tasks archived
`;
        const noticeText = tdMsg + tmMsg + taMsg;
        new import_obsidian.Notice(noticeText);
      } catch (err) {
        new import_obsidian.Notice(err);
        console.log(err);
        return;
      }
    });
  }
};
var PackratSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.defaultDeletionTrigger = "%%done_del%%";
    this.defaultBottomTrigger = "%%done_move%%";
    this.defaultArchiveTrigger = "%%done_log%%";
    this.defaultArchiveFilepath = "logfile.md";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Packrat plugin settings" });
    new import_obsidian.Setting(containerEl).setName("Deletion trigger").setDesc("Text to trigger deletion of completed recurring Task instance").addText((text) => text.setPlaceholder(this.defaultDeletionTrigger).setValue(this.plugin.settings.deletion_trigger).onChange((value) => __async(this, null, function* () {
      console.log("deletion_trigger: " + value);
      this.plugin.settings.deletion_trigger = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName('"Move to end of file" trigger').setDesc("Text to trigger moving completed recurring Task instance to bottom of Active note").addText((text) => text.setPlaceholder(this.defaultbottomTrigger).setValue(this.plugin.settings.bottom_trigger).onChange((value) => __async(this, null, function* () {
      console.log("bottom_trigger: " + value);
      this.plugin.settings.bottom_trigger = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Archive trigger").setDesc("Text to trigger moving completed recurring Task instance to archive note").addText((text) => text.setPlaceholder(this.defaultarchiveTrigger).setValue(this.plugin.settings.archive_trigger).onChange((value) => __async(this, null, function* () {
      console.log("archive_trigger: " + value);
      this.plugin.settings.archive_trigger = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Archive file").setDesc('Relative filepath to archive file (include ".md" extension)').addText((text) => text.setPlaceholder(this.defaultArchiveFilepath).setValue(this.plugin.settings.archive_filepath).onChange((value) => __async(this, null, function* () {
      console.log("archive_filepath: " + value);
      this.plugin.settings.archive_filepath = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFja3JhdFNldHRpbmdzIHtcblx0ZGVsZXRpb25fdHJpZ2dlcjogc3RyaW5nO1xuXHRib3R0b21fdHJpZ2dlcjogc3RyaW5nO1xuXHRhcmNoaXZlX3RyaWdnZXI6IHN0cmluZztcblx0YXJjaGl2ZV9maWxlcGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGFja3JhdFNldHRpbmdzID0ge1xuXHRkZWxldGlvbl90cmlnZ2VyOiAnJSVkb25lX2RlbCUlJyxcblx0Ym90dG9tX3RyaWdnZXI6ICclJWRvbmVfZW5kJSUnLFxuXHRhcmNoaXZlX3RyaWdnZXI6ICclJWRvbmVfbG9nJSUnLFxuXHRhcmNoaXZlX2ZpbGVwYXRoOiAnYXJjaGl2ZS5tZCcsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhY2tyYXRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogUGFja3JhdFNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZygnUGFja3JhdDogTG9hZGluZy4uLicpXG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBQYWNrcmF0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHsgIC8vICh0byB0aGUgQ29tbWFuZCBQYWxldHRlKVxuXHRcdFx0aWQ6ICdydW4nLFxuXHRcdFx0bmFtZTogJ1Byb2Nlc3MgY29tcGxldGVkIHJlY3VycmluZyBUYXNrcyB3aXRoaW4gdGhlIGFjdGl2ZSBub3RlJyxcblxuXHRcdFx0Y2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdC8vIFBhY2tyYXQgb25seSB3b3JrcyBvbiBhbiBvcGVuIG1hcmtkb3duICgubWQpIG5vdGUgZmlsZVxuXHRcdFx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB3b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHQvLyBJbmNsdWRlIGluIENvbW1hbmQgUGFsZXR0ZSBvbmx5IHdoZW4gZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIGFjdGl2ZUZpbGUuZXh0ZW5zaW9uID09IFwibWRcIikge1xuXHRcdFx0XHRcdGlmIChjaGVja2luZykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIEFjdHVhbGx5IGV4ZWN1dGUgY29tbWFuZFxuXHRcdFx0XHRcdHRoaXMuUHJvY2Vzc0NvbXBsZXRlZFJlY3VycmluZ1Rhc2tzKGFjdGl2ZUZpbGUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coJ1BhY2tyYXQ6IFVubG9hZGluZy4uLicpXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIFByb2Nlc3NDb21wbGV0ZWRSZWN1cnJpbmdUYXNrcyhhY3RpdmVGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgeyB2YXVsdCB9ID0gdGhpcy5hcHA7XG5cdFx0XHRjb25zdCBycnVsZVNpZ25pZmllciA9IFwiXHVEODNEXHVERDAxXCIubm9ybWFsaXplKCk7XG5cdFx0XHRjb25zdCBkZWxldGVUcmlnZ2VyID0gdGhpcy5zZXR0aW5ncy5kZWxldGlvbl90cmlnZ2VyO1xuXHRcdFx0Y29uc3QgYXJjaGl2ZVRyaWdnZXIgPSB0aGlzLnNldHRpbmdzLmFyY2hpdmVfdHJpZ2dlcjtcblx0XHRcdGNvbnN0IGJvdHRvbVRyaWdnZXIgPSB0aGlzLnNldHRpbmdzLmJvdHRvbV90cmlnZ2VyO1xuXHRcdFx0Y29uc3QgYXJjaGl2ZUZpbGVuYW1lID0gdGhpcy5zZXR0aW5ncy5hcmNoaXZlX2ZpbGVwYXRoO1xuXHRcdFx0Y29uc3QgYXJjaGl2ZUZpbGUgPVxuXHRcdFx0XHQodmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGFyY2hpdmVGaWxlbmFtZSkpIHx8XG5cdFx0XHRcdChhd2FpdCB2YXVsdC5jcmVhdGUoYXJjaGl2ZUZpbGVuYW1lLCBcIlwiKSk7XG5cblx0XHRcdGxldCBkZWxldGVkVGFza0NvdW50ID0gMDtcblx0XHRcdGxldCBtb3ZlZFRhc2tDb3VudCA9IDA7XG5cdFx0XHRsZXQgYXJjaGl2ZWRUYXNrQ291bnQgPSAwO1xuXHRcdFx0bGV0IHRoaXNMaW5lID0gXCJcIjtcblx0XHRcdGxldCB3cml0ZWJhY2tMaW5lcyA9IFtdO1xuXHRcdFx0bGV0IGFwcGVuZExpbmVzID0gW107XG5cdFx0XHRsZXQgYXJjaGl2ZUxpbmVzID0gW107XG5cdFx0XHRsZXQgcmVzdWx0cyA9IFtdO1xuXG5cdFx0XHRsZXQgZmlsZUNvbnRlbnRzID0gYXdhaXQgdmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblx0XHRcdGZpbGVDb250ZW50cyA9IGZpbGVDb250ZW50cy5zcGxpdChcIlxcblwiKTtcblxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlQ29udGVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpc0xpbmUgPSBmaWxlQ29udGVudHNbaV07XG5cdFx0XHRcdGxldCBmaXJzdEZpdmUgPSB0aGlzTGluZS5zdWJzdHJpbmcoMCwgNSkudG9VcHBlckNhc2UoKVxuXHRcdFx0XHQvLyB0ZXN0IGlmIHRoaXMgaXMgYSBjb21wbGV0ZWQgaW5zdGFuY2Ugb2YgcmVjdXJyaW5nIFRhc2tcblx0XHRcdFx0aWYgKGZpcnN0Rml2ZSA9PT0gXCItIFtYXVwiICYmIHRoaXNMaW5lLmluZGV4T2YocnJ1bGVTaWduaWZpZXIpICE9IC0xKSB7XG5cdFx0XHRcdFx0Ly8gdGVzdCBmb3IgJ2RlbGV0ZScgdHJpZ2dlclxuXHRcdFx0XHRcdGlmICgwIDwgdGhpc0xpbmUuaW5kZXhPZihkZWxldGVUcmlnZ2VyKSkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlZFRhc2tDb3VudCArPSAxO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIHRlc3QgZm9yICdhcmNoaXZlJyB0cmlnZ2VyXG5cdFx0XHRcdFx0aWYgKDAgPCB0aGlzTGluZS5pbmRleE9mKGFyY2hpdmVUcmlnZ2VyKSkge1xuXHRcdFx0XHRcdFx0YXJjaGl2ZUxpbmVzLnB1c2godGhpc0xpbmUpO1xuXHRcdFx0XHRcdFx0YXJjaGl2ZWRUYXNrQ291bnQgKz0gMTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyB0ZXN0IGZvciAnbW92ZScgdHJpZ2dlclxuXHRcdFx0XHRcdGlmICgwIDwgdGhpc0xpbmUuaW5kZXhPZihib3R0b21UcmlnZ2VyKSkge1xuXHRcdFx0XHRcdFx0YXBwZW5kTGluZXMucHVzaCh0aGlzTGluZSk7XG5cdFx0XHRcdFx0XHRtb3ZlZFRhc2tDb3VudCArPSAxO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGNvbXBsZXRlZCByZWN1cnJpbmcgVGFzayB3aXRoIG5vIFBhY2tyYXQgdHJpZ2dlcnNcblx0XHRcdFx0XHR3cml0ZWJhY2tMaW5lcy5wdXNoKHRoaXNMaW5lKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvLyBub3QgYSBjb21wbGV0ZWQgcmVjdXJyaW5nIFRhc2tcblx0XHRcdFx0XHR3cml0ZWJhY2tMaW5lcy5wdXNoKHRoaXNMaW5lKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYXJjaGl2ZWRUYXNrQ291bnQgPiAwKSB7IC8vIG90aGVyd2lzZSBuZWVkbid0IG1vZGlmeSBhcmNoaXZlRmlsZVxuXHRcdFx0XHRsZXQgYXJjaGl2ZUZpbGVDb250ZW50cyA9IGF3YWl0IHZhdWx0LnJlYWQoYXJjaGl2ZUZpbGUpO1xuXHRcdFx0XHRhcmNoaXZlRmlsZUNvbnRlbnRzID0gYXJjaGl2ZUZpbGVDb250ZW50cy5zcGxpdChcIlxcblwiKTtcblx0XHRcdFx0YXJjaGl2ZUZpbGVDb250ZW50cyA9IGFyY2hpdmVGaWxlQ29udGVudHMuY29uY2F0KGFyY2hpdmVMaW5lcyk7XG5cdFx0XHRcdHZhdWx0Lm1vZGlmeShhcmNoaXZlRmlsZSwgYXJjaGl2ZUZpbGVDb250ZW50cy5qb2luKFwiXFxuXCIpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gcmV3cml0ZSBhY3RpdmUgTm90ZSBmaWxlIHdpdGggZGVzaWduYXRlZCBUYXNrcyBhdCBib3R0b20gYW5kIERlbGV0ZWQgYW5kIEFyY2hpdmVkIHRhc2tzIHJlbW92ZWRcblx0XHRcdHJlc3VsdHMgPSB3cml0ZWJhY2tMaW5lcy5jb25jYXQoYXBwZW5kTGluZXMpO1xuXHRcdFx0dmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHJlc3VsdHMuam9pbihcIlxcblwiKSk7XG5cdFx0XHR2YXIgdGRNc2cgPSBgJHtkZWxldGVkVGFza0NvdW50fSB0YXNrcyBkZWxldGVkXFxuYDtcblx0XHRcdHZhciB0bU1zZyA9IGAke21vdmVkVGFza0NvdW50fSB0YXNrcyBtb3ZlZCB0byBlbmQgb2Ygbm90ZVxcbmA7XG5cdFx0XHR2YXIgdGFNc2cgPSBgJHthcmNoaXZlZFRhc2tDb3VudH0gdGFza3MgYXJjaGl2ZWRcXG5gO1xuXHRcdFx0Y29uc3Qgbm90aWNlVGV4dCA9IHRkTXNnICsgdG1Nc2cgKyB0YU1zZztcblx0XHRcdG5ldyBOb3RpY2Uobm90aWNlVGV4dCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGVycik7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBQYWNrcmF0U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFBhY2tyYXRQbHVnaW47XG5cblx0cHVibGljIGRlZmF1bHREZWxldGlvblRyaWdnZXIgPSBcIiUlZG9uZV9kZWwlJVwiO1xuXHRwdWJsaWMgZGVmYXVsdEJvdHRvbVRyaWdnZXIgPSBcIiUlZG9uZV9tb3ZlJSVcIjtcblx0cHVibGljIGRlZmF1bHRBcmNoaXZlVHJpZ2dlciA9IFwiJSVkb25lX2xvZyUlXCI7XG5cdHB1YmxpYyBkZWZhdWx0QXJjaGl2ZUZpbGVwYXRoID0gXCJsb2dmaWxlLm1kXCI7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUGFja3JhdFBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1BhY2tyYXQgcGx1Z2luIHNldHRpbmdzJyB9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RlbGV0aW9uIHRyaWdnZXInKVxuXHRcdFx0LnNldERlc2MoJ1RleHQgdG8gdHJpZ2dlciBkZWxldGlvbiBvZiBjb21wbGV0ZWQgcmVjdXJyaW5nIFRhc2sgaW5zdGFuY2UnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcih0aGlzLmRlZmF1bHREZWxldGlvblRyaWdnZXIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGlvbl90cmlnZ2VyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2RlbGV0aW9uX3RyaWdnZXI6ICcgKyB2YWx1ZSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRpb25fdHJpZ2dlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdcIk1vdmUgdG8gZW5kIG9mIGZpbGVcIiB0cmlnZ2VyJylcblx0XHRcdC5zZXREZXNjKCdUZXh0IHRvIHRyaWdnZXIgbW92aW5nIGNvbXBsZXRlZCByZWN1cnJpbmcgVGFzayBpbnN0YW5jZSB0byBib3R0b20gb2YgQWN0aXZlIG5vdGUnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcih0aGlzLmRlZmF1bHRib3R0b21UcmlnZ2VyKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm90dG9tX3RyaWdnZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnYm90dG9tX3RyaWdnZXI6ICcgKyB2YWx1ZSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm90dG9tX3RyaWdnZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQXJjaGl2ZSB0cmlnZ2VyJylcblx0XHRcdC5zZXREZXNjKCdUZXh0IHRvIHRyaWdnZXIgbW92aW5nIGNvbXBsZXRlZCByZWN1cnJpbmcgVGFzayBpbnN0YW5jZSB0byBhcmNoaXZlIG5vdGUnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcih0aGlzLmRlZmF1bHRhcmNoaXZlVHJpZ2dlcilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVfdHJpZ2dlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdhcmNoaXZlX3RyaWdnZXI6ICcgKyB2YWx1ZSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXJjaGl2ZV90cmlnZ2VyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0FyY2hpdmUgZmlsZScpXG5cdFx0XHQuc2V0RGVzYygnUmVsYXRpdmUgZmlsZXBhdGggdG8gYXJjaGl2ZSBmaWxlIChpbmNsdWRlIFwiLm1kXCIgZXh0ZW5zaW9uKScpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHRoaXMuZGVmYXVsdEFyY2hpdmVGaWxlcGF0aClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVfZmlsZXBhdGgpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnYXJjaGl2ZV9maWxlcGF0aDogJyArIHZhbHVlKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcmNoaXZlX2ZpbGVwYXRoID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHR9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFzRTtBQVMvRCxJQUFNLG1CQUFvQztBQUFBLEVBQ2hELGtCQUFrQjtBQUFBLEVBQ2xCLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLGtCQUFrQjtBQUFBO0FBR25CLGtDQUEyQyx1QkFBTztBQUFBLEVBRzNDLFNBQVM7QUFBQTtBQUNkLGNBQVEsSUFBSTtBQUVaLFlBQU0sS0FBSztBQUVYLFdBQUssY0FBYyxJQUFJLGtCQUFrQixLQUFLLEtBQUs7QUFFbkQsV0FBSyxXQUFXO0FBQUEsUUFDZixJQUFJO0FBQUEsUUFDSixNQUFNO0FBQUEsUUFFTixlQUFlLENBQUMsYUFBc0I7QUFFckMsZ0JBQU0sRUFBRSxjQUFjLEtBQUs7QUFDM0IsZ0JBQU0sYUFBYSxVQUFVO0FBRTdCLGNBQUksY0FBYyxXQUFXLGFBQWEsTUFBTTtBQUMvQyxnQkFBSSxVQUFVO0FBQ2IscUJBQU87QUFBQTtBQUdSLGlCQUFLLCtCQUErQjtBQUFBLGlCQUM5QjtBQUNOLG1CQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTVgsV0FBVztBQUNWLFlBQVEsSUFBSTtBQUFBO0FBQUEsRUFHUCxlQUFlO0FBQUE7QUFDcEIsV0FBSyxXQUFXLE9BQU8sT0FBTyxJQUFJLGtCQUFrQixNQUFNLEtBQUs7QUFBQTtBQUFBO0FBQUEsRUFHMUQsZUFBZTtBQUFBO0FBQ3BCLFlBQU0sS0FBSyxTQUFTLEtBQUs7QUFBQTtBQUFBO0FBQUEsRUFHcEIsK0JBQStCLFlBQTJCO0FBQUE7QUFFL0QsVUFBSTtBQUNILGNBQU0sRUFBRSxVQUFVLEtBQUs7QUFDdkIsY0FBTSxpQkFBaUIsWUFBSztBQUM1QixjQUFNLGdCQUFnQixLQUFLLFNBQVM7QUFDcEMsY0FBTSxpQkFBaUIsS0FBSyxTQUFTO0FBQ3JDLGNBQU0sZ0JBQWdCLEtBQUssU0FBUztBQUNwQyxjQUFNLGtCQUFrQixLQUFLLFNBQVM7QUFDdEMsY0FBTSxjQUNKLE1BQU0sc0JBQXNCLG9CQUM1QixPQUFNLE1BQU0sT0FBTyxpQkFBaUI7QUFFdEMsWUFBSSxtQkFBbUI7QUFDdkIsWUFBSSxpQkFBaUI7QUFDckIsWUFBSSxvQkFBb0I7QUFDeEIsWUFBSSxXQUFXO0FBQ2YsWUFBSSxpQkFBaUI7QUFDckIsWUFBSSxjQUFjO0FBQ2xCLFlBQUksZUFBZTtBQUNuQixZQUFJLFVBQVU7QUFFZCxZQUFJLGVBQWUsTUFBTSxNQUFNLEtBQUs7QUFDcEMsdUJBQWUsYUFBYSxNQUFNO0FBRWxDLGlCQUFTLElBQUksR0FBRyxJQUFJLGFBQWEsUUFBUSxLQUFLO0FBQzdDLHFCQUFXLGFBQWE7QUFDeEIsY0FBSSxZQUFZLFNBQVMsVUFBVSxHQUFHLEdBQUc7QUFFekMsY0FBSSxjQUFjLFdBQVcsU0FBUyxRQUFRLG1CQUFtQixJQUFJO0FBRXBFLGdCQUFJLElBQUksU0FBUyxRQUFRLGdCQUFnQjtBQUN4QyxrQ0FBb0I7QUFDcEI7QUFBQTtBQUdELGdCQUFJLElBQUksU0FBUyxRQUFRLGlCQUFpQjtBQUN6QywyQkFBYSxLQUFLO0FBQ2xCLG1DQUFxQjtBQUNyQjtBQUFBO0FBR0QsZ0JBQUksSUFBSSxTQUFTLFFBQVEsZ0JBQWdCO0FBQ3hDLDBCQUFZLEtBQUs7QUFDakIsZ0NBQWtCO0FBQ2xCO0FBQUE7QUFHRCwyQkFBZSxLQUFLO0FBQUEsaUJBRWhCO0FBRUosMkJBQWUsS0FBSztBQUFBO0FBQUE7QUFJdEIsWUFBSSxvQkFBb0IsR0FBRztBQUMxQixjQUFJLHNCQUFzQixNQUFNLE1BQU0sS0FBSztBQUMzQyxnQ0FBc0Isb0JBQW9CLE1BQU07QUFDaEQsZ0NBQXNCLG9CQUFvQixPQUFPO0FBQ2pELGdCQUFNLE9BQU8sYUFBYSxvQkFBb0IsS0FBSztBQUFBO0FBSXBELGtCQUFVLGVBQWUsT0FBTztBQUNoQyxjQUFNLE9BQU8sWUFBWSxRQUFRLEtBQUs7QUFDdEMsWUFBSSxRQUFRLEdBQUc7QUFBQTtBQUNmLFlBQUksUUFBUSxHQUFHO0FBQUE7QUFDZixZQUFJLFFBQVEsR0FBRztBQUFBO0FBQ2YsY0FBTSxhQUFhLFFBQVEsUUFBUTtBQUNuQyxZQUFJLHVCQUFPO0FBQUEsZUFDSCxLQUFQO0FBQ0QsWUFBSSx1QkFBTztBQUNYLGdCQUFRLElBQUk7QUFDWjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0gsc0NBQWdDLGlDQUFpQjtBQUFBLEVBUWhELFlBQVksS0FBVSxRQUF1QjtBQUM1QyxVQUFNLEtBQUs7QUFOTCxrQ0FBeUI7QUFDekIsZ0NBQXVCO0FBQ3ZCLGlDQUF3QjtBQUN4QixrQ0FBeUI7QUFJL0IsU0FBSyxTQUFTO0FBQUE7QUFBQSxFQUdmLFVBQWdCO0FBQ2YsVUFBTSxFQUFFLGdCQUFnQjtBQUN4QixnQkFBWTtBQUNaLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFFbkMsUUFBSSx3QkFBUSxhQUNWLFFBQVEsb0JBQ1IsUUFBUSxpRUFDUixRQUFRLFVBQVEsS0FDZixlQUFlLEtBQUssd0JBQ3BCLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQzlCLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGNBQVEsSUFBSSx1QkFBdUI7QUFDbkMsV0FBSyxPQUFPLFNBQVMsbUJBQW1CO0FBQ3hDLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFHckIsUUFBSSx3QkFBUSxhQUNWLFFBQVEsaUNBQ1IsUUFBUSxxRkFDUixRQUFRLFVBQVEsS0FDZixlQUFlLEtBQUssc0JBQ3BCLFNBQVMsS0FBSyxPQUFPLFNBQVMsZ0JBQzlCLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGNBQVEsSUFBSSxxQkFBcUI7QUFDakMsV0FBSyxPQUFPLFNBQVMsaUJBQWlCO0FBQ3RDLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFHckIsUUFBSSx3QkFBUSxhQUNWLFFBQVEsbUJBQ1IsUUFBUSw0RUFDUixRQUFRLFVBQVEsS0FDZixlQUFlLEtBQUssdUJBQ3BCLFNBQVMsS0FBSyxPQUFPLFNBQVMsaUJBQzlCLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGNBQVEsSUFBSSxzQkFBc0I7QUFDbEMsV0FBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ3ZDLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFHckIsUUFBSSx3QkFBUSxhQUNWLFFBQVEsZ0JBQ1IsUUFBUSwrREFDUixRQUFRLFVBQVEsS0FDZixlQUFlLEtBQUssd0JBQ3BCLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQzlCLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGNBQVEsSUFBSSx1QkFBdUI7QUFDbkMsV0FBSyxPQUFPLFNBQVMsbUJBQW1CO0FBQ3hDLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFBQTtBQUFBOyIsCiAgIm5hbWVzIjogW10KfQo=
